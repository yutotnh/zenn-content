---
title: "ターミナルの幅を変更する方法"
emoji: "↔️"
type: "tech"
topics: ["linux", "cli"]
published: false
---

LinuxのCLIアプリケーションをテストする際、端末の横幅や高さによって出力が変わる場合があります。そのため、テストの一環としてターミナルの幅を変更することがあります。

手動でターミナルの幅を変更することもできますが、CLIコマンドを使ってターミナルの幅を変更する方法もあります。

ここでは、ターミナルの幅を変更するいくつかの方法を紹介します。

## sttyコマンドを使う

sttyコマンドを使うと、ターミナルの幅を変更できます。

```bash
stty cols 40
```

このコマンドは、ターミナルの幅を40文字に変更します。

注意点として、sttyコマンドでターミナルの幅を変更しても、ターミナルのウィンドウサイズ自体は変更されません。そのため、必要に応じてターミナルのウィンドウサイズを手動で変更する必要があります。

`tput cols`やインタラクティブシェルではCOLUMNS環境変数を使って、ターミナルの幅が変更されたことを確認できます。ただし、実際の横幅が変わったわけではないため、`echo {1..100}`などで端末の横幅を考慮せずに横幅を超える出力を行っても改行されないため、戸惑うかもしれません。

## resizeコマンドを使う

resizeコマンドを使うと、ターミナルの幅を変更できます。

```bash
resize -s 40 80
```

このコマンドは、ターミナルの幅を40文字、高さを80文字に変更します。

端末によっては、resizeコマンドが使えない場合があります。その場合は、sttyコマンドを使うか、ターミナルのウィンドウサイズを手動で変更してください。

同じ端末でもディストリビューションや端末によってresizeコマンドが使えない場合があります。以下に、resizeコマンドが使えるかどうかをまとめました。

| ディストリビューション \ 端末 | xterm    | gnome-terminal | VS Codeの統合ターミナル |
| ----------------------------- | -------- | -------------- | ----------------------- |
| Ubuntu 24.04 LTS              | 無効(※1) | 有効           | 無効                    |
| Rocky Linux 9                 | 有効     | 有効           | 無効                    |

※1: allowWindowOpsを有効にすることで、resizeコマンドが使えるようになりました。

ディストリビューションによっても動作結果が変化するため、実行環境が固定されているような場合以外はsttyコマンドを使うことをオススメします。

## まとめ

ターミナルの幅を変更する方法について紹介しました。アプリケーションのテストを行う際に、ターミナルの幅を変更することで、アプリケーションの出力がどのように変わるかを確認できます。

個人的にはresizeコマンドを知ったときは"こういうのを求めていたんだ!"と嬉しかったのですが、端末やディストリビューションによっては使えない場合があるので、少し残念な気持ちになりました。
